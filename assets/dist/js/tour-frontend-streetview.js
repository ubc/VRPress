!function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=91)}({18:function(e,t){var o;o=jQuery,window.generateStreetViewModalCtrl=()=>{const e=document.createElement("DIV");return e.classList.add("map-container__hotspot-modal"),e.innerHTML=`\n          <div class='map-container__hotspot-modal-heading'>\n            <h2></h2>\n            <button><img src='${ubc_vrpress_admin.plugin_url}assets/src/image/times-solid.svg' alt="" /></button>\n          </div>\n          <div class='map-container__hotspot-modal-content'></div>\n      `,e},window.generatePanoNavigatorCtrl=(e,t,o)=>{const n=document.createElement("DIV");n.classList.add("map-container__pano-navigator");let r="";return t.forEach(e=>{r+=`<li lat="${e.position.lat}" lng="${e.position.lng}">${e.title}</li>`}),n.innerHTML=`\n        <div class="streetview__controls">\n            <div class="streetview__controls--menu"><img src="${ubc_vrpress_admin.plugin_url+"assets/src/image/bars-solid-gray.svg"}" alt=""></div>\n            <div class="streetview__controls--home"><img src="${ubc_vrpress_admin.plugin_url+"assets/src/image/home-solid-gray.svg"}" alt=""></div>\n        </div>\n        <div class="streetview__controls--menu-items">\n            <nav aria-label="scene navigation">\n                <ul>\n                    ${r}\n                </ul>\n            </nav>\n        </div>\n      `,n.querySelector(".streetview__controls--menu").addEventListener("click",()=>{n.querySelector(".streetview__controls--menu-items").classList.toggle("show")}),n.querySelectorAll(".streetview__controls--menu-items li").forEach(e=>{e.addEventListener("click",e=>{const t=parseFloat(e.target.getAttribute("lat")),r=parseFloat(e.target.getAttribute("lng"));o(t,r),n.querySelector(".streetview__controls--menu-items").classList.remove("show")})}),n.querySelector(".streetview__controls--home").addEventListener("click",()=>{o(e.position.lat,e.position.lng),n.querySelector(".streetview__controls--menu-items").classList.remove("show")}),n},o(document).on("click",".map-container__hotspot-modal button",(function(e){e.preventDefault();const t=o(this).closest(".map-container__hotspot-modal");t.find(".map-container__hotspot-modal-heading h2").html(""),t.find(".map-container__hotspot-modal-content").html(""),t.removeClass("show")}))},40:function(e,t,o){},85:function(e,t,o){},91:function(e,t,o){"use strict";o.r(t);var n;o(85),o(18),o(40);function r(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?r(Object(o),!0).forEach((function(t){s(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function s(e,t,o){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function a(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function c(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?a(Object(o),!0).forEach((function(t){l(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):a(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function l(e,t,o){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}jQuery,window.ubc_vrpress_streetview_init=()=>{function e(e,t){switch(e){case"Info":t="vrpress-hotspot iconType-Info";break;case"Link":t="vrpress-hotspot iconType-Link";break;case"Video":t="vrpress-hotspot iconType-Video";break;case"Image":t="vrpress-hotspot iconType-Image";break;case"oEmbed":t="vrpress-hotspot iconType-oEmbed-"+t}return t}window.ubc_vrpress_streetviews&&window.ubc_vrpress_streetviews.forEach(t=>{const o=document.getElementById(t.element),n=t.markers?t.markers.map(e=>i(i({},e),{},{position:{lat:parseFloat(e.position.lat),lng:parseFloat(e.position.lng)}})):[],r=t.hotSpots?t.hotSpots.map(e=>i(i({},e),{},{pov:{heading:parseFloat(e.pov.heading),pitch:parseFloat(e.pov.pitch)}})):[],s=n[parseInt(t.defaultMarker)],a=new google.maps.StreetViewPanorama(o,{position:s.position,linksControl:!1,panControl:!1,enableCloseButton:!1,addressControl:!1}),c=new google.maps.StreetViewService,l=window.generateStreetViewModalCtrl(),p=window.generatePanoNavigatorCtrl(s,n,(function(e,t){c.getPanorama({location:{lat:e,lng:t},radius:50},(function(e,t){if("OK"===t){const t=e.location;a.setPano(t.pano)}else console.error("Street View data not found for this location.")}))}));a.controls[google.maps.ControlPosition.TOP_RIGHT].push(l),a.controls[google.maps.ControlPosition.TOP_RIGHT].push(p);let u=[];r.forEach(t=>{const n=new PanoMarker({position:{heading:t.pov.heading,pitch:t.pov.pitch},container:o,pano:a,anchor:new google.maps.Point(20,20),size:new google.maps.Size(40,40),className:e(t.type,t.iconType)});n.panoID=t.pano,google.maps.event.addListener(n,"click",function(e,t){return function(o){if(e[e.type]||(e[e.type]={}),"Image"===e.type&&(e[e.type].content=`<div class="vrpress-modal-image-container"><img src="${e.Image.url}" alt="${e.Image.alt}" /><div class="vrpress-modal-image-container-caption">${e.Image.caption}</div>`),"Video"===e.type&&(e[e.type].content=`<video controls><source src="${e.Video.url}" type="video/mp4">Your browser does not support the video tag.</video>`),"oEmbed"!==e.type||isNaN(e.oEmbed.width)||isNaN(e.oEmbed.height)||(e[e.type].content=`<div class="pnlm-render-container__iframe-container" style="padding-bottom:${(e.oEmbed.height/e.oEmbed.width*100).toFixed(2)}%;"><iframe src="${e.oEmbed.embedUrl}" allowfullscreen /></div>`),"Link"===e.type)window.open(e.Link.URL);else{const o=t.querySelector(".map-container__hotspot-modal"),n=o.querySelector(".map-container__hotspot-modal-heading h2"),r=o.querySelector(".map-container__hotspot-modal-content");n.innerHTML=e.title,r.innerHTML=e[e.type].content?e[e.type].content:"",o.classList.add("show")}}}(t,o)),u.push(n)}),a.addListener("pano_changed",()=>{const e=a.getPano();u.forEach(t=>{const o=t.panoID;e==o?t.setVisible(!0):t.setVisible(!1)});const t=n.filter(e=>e.pano===a.pano);0!==t.length&&"true"===t[0].clickToGo?a.setOptions({clickToGo:!1}):a.setOptions({clickToGo:!0}),0!==t.length&&a.setOptions({pov:{heading:parseFloat(t[0].pov.heading),pitch:parseFloat(t[0].pov.pitch),zoom:parseFloat(t[0].pov.zoom)}})})})},window.ubc_vrpress_streetview_init(),n=jQuery,window.ubc_vrpress_streetview_map_init=()=>{window.ubc_vrpress_streetviews_maps&&window.ubc_vrpress_streetviews_maps.forEach(e=>{const t=document.getElementById(e.element),o=document.getElementById(e.streetview_element),r=e.markers?e.markers.map(e=>c(c({},e),{},{position:{lat:parseFloat(e.position.lat),lng:parseFloat(e.position.lng)}})):[],i=r[parseInt(e.defaultMarker)],s=new google.maps.Map(t,{center:i.position,zoom:13});r.forEach(e=>{new google.maps.Marker({position:e.position,map:s}).addListener("click",()=>{const t=o.querySelector('.streetview__controls--menu-items li[lat="'+e.position.lat+'"][lng="'+e.position.lng+'"]');t&&n("html, body").animate({scrollTop:o.offsetTop},1e3,(function(){t.click()}))})})})},window.ubc_vrpress_streetview_map_init()}});