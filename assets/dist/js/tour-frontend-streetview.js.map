{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./assets/src/js/streetview-extend.js","webpack:///./assets/src/js/streetview-init.js","webpack:///./assets/src/js/streetview-map-init.js","webpack:///./assets/src/scss/streetview-extend.scss?75b0","webpack:///./assets/src/scss/tour-frontend-streetview.scss?4857","webpack:///./webpack/tour-frontend-streetview.js"],"names":["$","window","generateStreetViewModalCtrl","mainDiv","document","createElement","classList","add","innerHTML","ubc_vrpress_admin","plugin_url","generatePanoNavigatorCtrl","defaultMarker","markers","cb","navigatorHTML","forEach","marker","position","lat","lng","title","querySelector","addEventListener","toggle","querySelectorAll","item","event","parseFloat","target","getAttribute","remove","on","e","preventDefault","modal","closest","find","html","removeClass","jQuery","ubc_vrpress_streetview_init","ubc_vrpress_streetviews","getHotspotIconByType","type","icon","streetview","element","getElementById","map","hotspots","hotSpots","hotspot","pov","heading","pitch","parseInt","panorama","google","maps","StreetViewPanorama","linksControl","panControl","enableCloseButton","addressControl","sv","StreetViewService","modalControl","navigatorControl","getPanorama","location","radius","data","status","setPano","pano","console","error","controls","ControlPosition","TOP_RIGHT","push","hotspotMarkers","newHotSpot","PanoMarker","container","anchor","Point","size","Size","className","iconType","panoID","addListener","content","Image","url","alt","caption","Video","isNaN","oEmbed","width","height","toFixed","embedUrl","open","Link","URL","modalElement","headingElement","contentElement","getPano","hotspotPano","setVisible","currentPano","filter","length","clickToGo","setOptions","zoom","ubc_vrpress_streetview_map_init","ubc_vrpress_streetviews_maps","streetview_map","streetviewElement","streetview_element","Map","center","newMarker","Marker","navigatorItem","animate","scrollTop","offsetTop","click"],"mappings":"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","file":"tour-frontend-streetview.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./webpack/tour-frontend-streetview.js\");\n","/**\n * Extend google map javascript API streetview.\n * Add custom modal html, controls and etc.\n */\n\n/* eslint-disable camelcase */\n( function( $ ) {\n    window.generateStreetViewModalCtrl = () => {\n        const mainDiv = document.createElement( 'DIV' );\n        mainDiv.classList.add( 'map-container__hotspot-modal' );\n        mainDiv.innerHTML = `\n          <div class='map-container__hotspot-modal-heading'>\n            <h2></h2>\n            <button><img src='${ ubc_vrpress_admin.plugin_url }assets/src/image/times-solid.svg' alt=\"\" /></button>\n          </div>\n          <div class='map-container__hotspot-modal-content'></div>\n      `;\n\n        return mainDiv;\n    };\n\n    window.generatePanoNavigatorCtrl = ( defaultMarker, markers, cb ) => {\n      const mainDiv = document.createElement( 'DIV' );\n      mainDiv.classList.add( 'map-container__pano-navigator' );\n\n      let navigatorHTML = '';\n\n      markers.forEach( marker => {\n        navigatorHTML += `<li lat=\"${ marker.position.lat }\" lng=\"${ marker.position.lng }\">${ marker.title }</li>`;\n      });\n\n      mainDiv.innerHTML = `\n        <div class=\"streetview__controls\">\n            <div class=\"streetview__controls--menu\"><img src=\"${ ubc_vrpress_admin.plugin_url + 'assets/src/image/bars-solid-gray.svg' }\" alt=\"\"></div>\n            <div class=\"streetview__controls--home\"><img src=\"${ ubc_vrpress_admin.plugin_url + 'assets/src/image/home-solid-gray.svg' }\" alt=\"\"></div>\n        </div>\n        <div class=\"streetview__controls--menu-items\">\n            <nav aria-label=\"scene navigation\">\n                <ul>\n                    ${ navigatorHTML }\n                </ul>\n            </nav>\n        </div>\n      `;\n\n      mainDiv.querySelector( '.streetview__controls--menu' ).addEventListener( 'click', () => {\n        mainDiv.querySelector( '.streetview__controls--menu-items' ).classList.toggle( 'show' );\n      });\n\n      mainDiv.querySelectorAll( '.streetview__controls--menu-items li' ).forEach( item => {\n        item.addEventListener( 'click', ( event ) => {\n          const lat = parseFloat( event.target.getAttribute( 'lat' ) );\n          const lng = parseFloat( event.target.getAttribute( 'lng' ) );\n          cb( lat, lng );\n          mainDiv.querySelector( '.streetview__controls--menu-items' ).classList.remove( 'show' );\n        });\n      });\n\n      mainDiv.querySelector( '.streetview__controls--home' ).addEventListener( 'click', () => {\n        cb( defaultMarker.position.lat, defaultMarker.position.lng );\n        mainDiv.querySelector( '.streetview__controls--menu-items' ).classList.remove( 'show' );\n      });\n\n      return mainDiv;\n  };\n\n    $( document ).on( 'click', '.map-container__hotspot-modal button', function( e ) {\n        e.preventDefault();\n        const modal = $( this ).closest( '.map-container__hotspot-modal' );\n        modal.find( '.map-container__hotspot-modal-heading h2' ).html( '' );\n        modal.find( '.map-container__hotspot-modal-content' ).html( '' );\n        modal.removeClass( 'show' );\n    });\n} ( jQuery ) );\n","/**\n * Initiate all existing google map streetview instances on current page.\n */\n\nimport './streetview-extend';\nimport './../scss/streetview-extend.scss';\n\n/* eslint-disable camelcase */\n( function( $ ) {\n    window.ubc_vrpress_streetview_init = () => {\n        if ( ! window.ubc_vrpress_streetviews ) {\n            return;\n        }\n\n        function getHotspotIconByType( type, icon ) {\n            switch ( type ) {\n              case 'Info':\n                icon = 'vrpress-hotspot iconType-Info';\n                break;\n              case 'Link':\n                icon = 'vrpress-hotspot iconType-Link';\n                break;\n              case 'Video':\n                icon = 'vrpress-hotspot iconType-Video';\n                break;\n              case 'Image':\n                icon = 'vrpress-hotspot iconType-Image';\n                break;\n              case 'oEmbed':\n                icon = 'vrpress-hotspot iconType-oEmbed-' + icon;\n                break;\n            }\n\n            return icon;\n        }\n\n        window.ubc_vrpress_streetviews.forEach( streetview => {\n            const element = document.getElementById( streetview.element );\n\n            const markers = streetview.markers ? streetview.markers.map( ( marker ) => {\n                return {\n                  ...marker,\n                  position: {\n                    lat: parseFloat( marker.position.lat ),\n                    lng: parseFloat( marker.position.lng )\n                  }\n                };\n              }) : [];\n\n            const hotspots = streetview.hotSpots ? streetview.hotSpots.map( ( hotspot ) => {\n            return {\n                ...hotspot,\n                pov: {\n                    heading: parseFloat( hotspot.pov.heading ),\n                    pitch: parseFloat( hotspot.pov.pitch )\n                }\n            };\n            }) : [];\n\n            const defaultMarker = markers[ parseInt( streetview.defaultMarker ) ];\n            const panorama = new google.maps.StreetViewPanorama(\n                element,\n                {\n                  position: defaultMarker.position,\n                  linksControl: false,\n                  panControl: false,\n                  enableCloseButton: false,\n                  addressControl: false\n                }\n            );\n            const sv = new google.maps.StreetViewService();\n\n            const modalControl = window.generateStreetViewModalCtrl();\n            const navigatorControl = window.generatePanoNavigatorCtrl( defaultMarker, markers, function( lat, lng ) {\n                sv.getPanorama({ location: { lat: lat, lng: lng }, radius: 50 }, function( data, status ) {\n                    if ( 'OK' === status ) {\n                        const location = data.location;\n                        panorama.setPano( location.pano );\n                    } else {\n                        console.error( 'Street View data not found for this location.' );\n                    }\n                });\n            });\n            panorama.controls[google.maps.ControlPosition.TOP_RIGHT].push( modalControl );\n            panorama.controls[google.maps.ControlPosition.TOP_RIGHT].push( navigatorControl );\n\n            let hotspotMarkers = [];\n\n            // Add markers\n            hotspots.forEach( hotspot  => {\n                const newHotSpot = new PanoMarker({\n                    position: {\n                        heading: hotspot.pov.heading,\n                        pitch: hotspot.pov.pitch\n                    },\n                    container: element,\n                    pano: panorama,\n                    anchor: new google.maps.Point( 20, 20 ),\n                    size: new google.maps.Size( 40, 40 ),\n                    className: getHotspotIconByType( hotspot.type, hotspot.iconType )\n                });\n\n                newHotSpot.panoID = hotspot.pano;\n\n                google.maps.event.addListener( newHotSpot, 'click', ( function( hotspot, element ) {\n                    return function( event ) {\n                        if ( ! hotspot[ hotspot.type ]) {\n                            hotspot[ hotspot.type ] = {};\n                        }\n\n                        if ( 'Image' === hotspot.type ) {\n                            hotspot[ hotspot.type ].content = `<div class=\"vrpress-modal-image-container\"><img src=\"${ hotspot.Image.url }\" alt=\"${ hotspot.Image.alt }\" /><div class=\"vrpress-modal-image-container-caption\">${ hotspot.Image.caption}</div>`;\n                        }\n\n                        if ( 'Video' === hotspot.type ) {\n                            hotspot[ hotspot.type ].content = `<video controls><source src=\"${ hotspot.Video.url }\" type=\"video/mp4\">Your browser does not support the video tag.</video>`;\n                        }\n\n                        if ( 'oEmbed' === hotspot.type && ! isNaN( hotspot.oEmbed.width ) && ! isNaN( hotspot.oEmbed.height ) ) {\n                            hotspot[ hotspot.type ].content = `<div class=\"pnlm-render-container__iframe-container\" style=\"padding-bottom:${ ( hotspot.oEmbed.height / hotspot.oEmbed.width * 100 ).toFixed( 2 ) }%;\"><iframe src=\"${ hotspot.oEmbed.embedUrl }\" allowfullscreen /></div>`;\n                        }\n\n                        if ( 'Link' === hotspot.type ) {\n                            window.open( hotspot.Link.URL );\n                        } else {\n                            const modalElement = element.querySelector( '.map-container__hotspot-modal' );\n                            const headingElement = modalElement.querySelector( '.map-container__hotspot-modal-heading h2' );\n                            const contentElement = modalElement.querySelector( '.map-container__hotspot-modal-content' );\n\n                            headingElement.innerHTML = hotspot.title;\n                            contentElement.innerHTML = hotspot[ hotspot.type ].content ? hotspot[ hotspot.type ].content : '';\n                            modalElement.classList.add( 'show' );\n                        }\n                    };\n                }  ( hotspot, element ) ) );\n\n                hotspotMarkers.push( newHotSpot );\n            });\n\n            panorama.addListener( 'pano_changed', () => {\n                const pano = panorama.getPano();\n\n                hotspotMarkers.forEach( hotspot => {\n                    const hotspotPano = hotspot.panoID;\n\n                    if ( pano == hotspotPano ) {\n                        hotspot.setVisible( true );\n                    } else {\n                        hotspot.setVisible( false );\n                    }\n                });\n\n                // Changed pano clickToGo based on selection\n                const currentPano = markers.filter( ( marker ) => {\n                    return marker.pano === panorama.pano;\n                });\n\n                if ( 0 !== currentPano.length && 'true' === currentPano[0].clickToGo ) {\n                    panorama.setOptions({\n                        clickToGo: false\n                    });\n                } else {\n                    panorama.setOptions({\n                        clickToGo: true\n                    });\n                }\n\n                if ( 0 !== currentPano.length ) {\n\n                    panorama.setOptions({\n                        pov: {\n                            heading: parseFloat( currentPano[0].pov.heading ),\n                            pitch: parseFloat( currentPano[0].pov.pitch ),\n                            zoom: parseFloat( currentPano[0].pov.zoom )\n                        }\n                    });\n                }\n            });\n        });\n    };\n} ( jQuery ) );\n\nwindow.ubc_vrpress_streetview_init();\n","/**\n * Initiate all existing google map instances associated with streetview on current page.\n */\n\nimport './streetview-extend';\nimport './../scss/streetview-extend.scss';\n\n/* eslint-disable camelcase */\n( function( $ ) {\n    window.ubc_vrpress_streetview_map_init = () => {\n        if ( ! window.ubc_vrpress_streetviews_maps ) {\n            return;\n        }\n\n        window.ubc_vrpress_streetviews_maps.forEach( streetview_map => {\n            const element = document.getElementById( streetview_map.element );\n            const streetviewElement = document.getElementById( streetview_map.streetview_element );\n\n            const markers = streetview_map.markers ? streetview_map.markers.map( ( marker ) => {\n                return {\n                  ...marker,\n                  position: {\n                    lat: parseFloat( marker.position.lat ),\n                    lng: parseFloat( marker.position.lng )\n                  }\n                };\n            }) : [];\n\n            const defaultMarker = markers[ parseInt( streetview_map.defaultMarker ) ];\n\n            const map = new google.maps.Map( element, {\n                center: defaultMarker.position,\n                zoom: 13\n            });\n\n            markers.forEach( marker => {\n                const newMarker = new google.maps.Marker({\n                    position: marker.position,\n                    map: map\n                });\n\n                newMarker.addListener( 'click', () => {\n                    const navigatorItem = streetviewElement.querySelector( '.streetview__controls--menu-items li[lat=\"' + marker.position.lat + '\"][lng=\"' + marker.position.lng + '\"]' );\n\n                    if ( navigatorItem ) {\n                        $( 'html, body' ).animate({\n                            scrollTop: streetviewElement.offsetTop\n                          }, 1000, function() {\n                            navigatorItem.click();\n                        });\n                    }\n                });\n            });\n\n        });\n    };\n\n} ( jQuery ) );\n\nwindow.ubc_vrpress_streetview_map_init();\n","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","import '../assets/src/scss/tour-frontend-streetview.scss';\nimport '../assets/src/js/streetview-extend';\nimport '../assets/src/js/streetview-init';\nimport '../assets/src/js/streetview-map-init';\n"],"sourceRoot":""}